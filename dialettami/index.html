<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Dialettami</title>
  <meta name="description" content="Traduci frasi tra Italiano e i dialetti italiani con l'aiuto dell'AI." />
  
<!-- Google tag (GA4) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-912CBJB8ZW"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-912CBJB8ZW'); // niente anonymize_ip: in GA4 √® automatico
</script>

  <!-- Favicon emoji üáÆüáπ nella tab del browser -->
  <link rel="icon"
        href='data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 64 64"><text y="50" font-size="52">üáÆüáπ</text></svg>'>

  <style>
    :root{
      --bg:#f7f9fb; --card:#ffffff; --text:#1f2937; --muted:#6b7280;
      --primary:#2e7d32; --accent:#d32f2f; --accent-2:#1e88e5;
      --italy: linear-gradient(90deg, #2e7d32 0 33%, #ffffff 33% 66%, #d32f2f 66%);
      --radius:16px; --shadow: 0 8px 24px rgba(0,0,0,.08);
    }
    *{box-sizing:border-box}
    html,body{margin:0;padding:0;background:var(--bg);color:var(--text);font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji";}
    a{color:inherit}
    .wrap{max-width:900px;margin:0 auto;padding:20px}
    header{display:flex;align-items:center;justify-content:center;gap:12px;margin:12px 0 20px 0;}
    .flag{width:28px;height:18px;border-radius:3px;background:var(--italy);box-shadow:inset 0 0 0 1px rgba(0,0,0,.05);}
    h1{font-size:clamp(26px,4vw,36px);margin:0;font-weight:800;letter-spacing:.2px}
    .card{background:var(--card);border-radius:var(--radius);box-shadow:var(--shadow);padding:18px;}
    .row{display:flex;flex-wrap:wrap;gap:12px}
    .col{flex:1 1 260px}
    label{display:block;font-weight:600;margin:6px 0 8px;color:#0f172a}
    .muted{color:var(--muted);font-size:.95rem}
    textarea, select, input[type="text"]{font-size: 16px;width:100%;padding:14px 14px;border-radius:12px;border:1px solid #e5e7eb;background:#fff;color:var(--text);outline: none;}
    textarea{min-height:120px;resize:vertical;line-height:1.4}
    select:focus, textarea:focus{border-color:var(--accent-2);box-shadow:0 0 0 3px rgba(30,136,229,.15)}
    .mode-switch{display:flex;gap:8px;flex-wrap:wrap;margin-bottom:8px}
    .pill{border:1px solid #e5e7eb;border-radius:999px;padding:8px 12px;cursor:pointer;background:#fff;}
    .pill input{display:none}
    .pill.active{border-color:var(--primary);box-shadow:0 2px 0 0 var(--primary) inset}
    .btn{display:inline-flex;align-items:center;justify-content:center;gap:10px;font-weight:800;letter-spacing:.3px;width:100%;padding:14px 18px;border-radius:14px;border:none;cursor:pointer;background:linear-gradient(135deg,var(--primary), #43a047);color:#fff;transition: transform .06s ease, filter .2s ease;}
    .btn:hover{filter:brightness(1.05)}
    .btn:active{transform:translateY(1px)}
    .btn .emoji{font-size:1.2rem}
    .outputs{display:grid;grid-template-columns:1fr;gap:12px;margin-top:14px}
    .out{background:#fff;border:1px solid #e5e7eb;border-radius:12px;padding:14px;position:relative;}
    .out h3{margin:0 0 8px 0;font-size:1rem}
    .copy{position:absolute;top:10px;right:10px;border:1px solid #e5e7eb;background:#fff;border-radius:8px;padding:6px 10px;cursor:pointer;}
    .footer{margin:24px 0 32px;text-align:center;color:var(--muted);font-size:.9rem}
    .badge{display:inline-flex;align-items:center;gap:8px;padding:6px 10px;border-radius:12px;background:#fff;border:1px solid #e5e7eb;}
    .dialect-select{width:100%}
    .hidden{display:none!important}
    @media (min-width:720px){.outputs{grid-template-columns:1fr 1fr}}
    .dictate-btn {background: none;border: none;color: var(--muted);font-size: 1.2rem;cursor: pointer;padding: 4px 6px;border-radius: 8px;transition: background 0.2s;}
    .dictate-btn:hover {background: rgba(0,0,0,0.05);} 

    /* Cookie banner minimal */
    #cookie-banner{position:fixed;left:12px;right:12px;bottom:12px;display:flex;gap:12px;align-items:center;justify-content:space-between;background:#111827;color:#e5e7eb;border:1px solid #1f2937;border-radius:12px;box-shadow:var(--shadow);padding:10px 12px;font-size:.95rem;z-index:50}
    #cookie-banner a{color:#cc7;text-decoration:underline}
    #cookie-banner button{background:#16a34a;color:#fff;border:none;border-radius:10px;padding:8px 12px;font-weight:700;cursor:pointer}

    /* Modale limite raggiunto */
    .modal-backdrop{position:fixed;inset:0;background:rgba(0,0,0,.35);display:none;align-items:center;justify-content:center;z-index:60}
    .modal{background:#fff;border-radius:16px;box-shadow:var(--shadow);max-width:520px;width:92%;padding:18px;border:1px solid #e5e7eb}
    .modal h2{margin:0 0 8px 0;font-size:1.15rem}
    .modal p{margin:0 0 12px 0;color:var(--muted)}
    .modal .actions{display:flex;gap:8px;justify-content:flex-end}
    .modal .actions a, .modal .actions button{padding:10px 14px;border-radius:12px;border:1px solid #e5e7eb;background:#fff;cursor:pointer}
    .modal .actions .primary{background:linear-gradient(135deg,var(--primary), #43a047);color:#fff;border:none}

    /* Bottom nav trasparente */
#bottom-nav { margin-top: 2rem; display:flex; justify-content:center; gap:1.5rem; font-size:1.5rem; opacity:.6; }
#bottom-nav a { text-decoration:none; background:transparent; border:none; cursor:pointer; font-size:1.5rem; transition:opacity .3s; }
#bottom-nav a:hover { opacity:1; }

#usage-info{margin-top:16px;text-align:center;font-size:.9rem;color:var(--muted)}
#usage-info span{display:inline-block;margin:0 4px;padding:6px 10px;border-radius:12px;background:#fff;border:1px solid #e5e7eb}

  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <div class="flag" aria-hidden="true"></div>
      <h1>Dialettami</h1>
    </header>

    <div class="card">
      <div class="mode-switch" role="tablist" aria-label="Modalit√† di traduzione">
        <label class="pill active" id="mode-it-to-dialetto">
          <input type="radio" name="mode" value="it_to_dia" checked />
          üáÆüáπ‚Üíüó£Ô∏è Da Italiano a Dialetto
        </label>
        <label class="pill" id="mode-dialetto-to-it">
          <input type="radio" name="mode" value="dia_to_it" />
          üó£Ô∏è‚ÜíüáÆüáπ Da Dialetto a Italiano
        </label>
      </div>

      <div id="form-it-to-dia" class="form">
        <label for="text-it" class="muted">Scrivi o registra qui sotto quello che vuoi tradurre in uno qualsiasi dei dialetti italiani.</label>
        <button id="dictate" class="dictate-btn" title="Dettatura vocale">üéôÔ∏è</button>
        <textarea id="text-it" placeholder="Es. Oggi √® una bella giornata"></textarea>

        <div class="row" style="margin-top:12px">
          <div class="col">
            <label for="dialect">Scegli il dialetto</label>
            <select id="dialect" class="dialect-select">
              <optgroup label="Nord Italia">
                <option>Milanese</option><option>Piemontese</option><option>Bolognese</option><option>Romagnolo</option><option>Veneto</option><option>Liguriano</option><option>Friulano</option><option>Ladino</option>
              </optgroup>
              <optgroup label="Centro Italia">
                <option>Toscano</option><option>Fiorentino</option><option>Romanesco</option><option>Dialetti umbri</option><option>Dialetti marchigiani</option><option>Dialetti laziali (non romaneschi)</option>
              </optgroup>
              <optgroup label="Sud Italia">
                <option>Napoletano</option><option>Calabrese di Cosenza</option><option>Calabrese di Catanzaro</option><option>Salentino</option><option>Pugliese (Apulo)</option>
              </optgroup>
              <optgroup label="Isole">
                <option>Siciliano</option><option>Sardo</option><option>Logudorese</option><option>Campidanese</option>
              </optgroup>
            </select>
          </div>
        </div>
      </div>

      <div id="form-dia-to-it" class="form hidden">
        <label for="text-dia" class="muted">Scrivi o registra qui sotto quello che vuoi tradurre da un qualsiasi dialetto all‚Äôitaliano.</label>
        <button id="dictate" class="dictate-btn" title="Dettatura vocale">üéôÔ∏è</button>
        <textarea id="text-dia" placeholder="Es. Che b√®la zurn√®"></textarea>
      </div>

      <div style="margin-top:16px">
        <button id="btn" class="btn"><span class="emoji">üó∫Ô∏è</span> DIALETTAMI <span class="emoji">üáÆüáπ</span></button>
      </div>

      <div class="outputs">
        <div class="out">
          <h3>Traduzione</h3>
          <button class="copy" data-target="translation">Copia</button>
          <div id="translation" class="muted">La traduzione apparir√† qui sotto.</div>
        </div>
        <div class="out">
          <h3>Spiegazione</h3>
          <button class="copy" data-target="explanation">Copia</button>
          <div id="explanation" class="muted">Una breve spiegazione dei singoli termini tradotti apparir√† qui.</div>
        </div>
      </div>

      <div id="bottom-nav">
        <a href="https://stru-menti.com/" title="Home">üè†</a>
        <a href="https://stru-menti.com/ricettario" title="Il Ricettario">üç≥</a>
        <a href="https://stru-menti.com/bekind" title="Be Kind Tool">üå∏</a>
        <a href="https://stru-menti.com/prezzogiusto" title="Prezzo Giusto">üí∂</a>
      </div>    

      <div class="footer">
        <span class="badge">2025 Dialettami da Struüß†Menti ‚Äì Creato da Leonardo Bergonzoni con üß† e AI</span>
        <div id="usage-info" class="hidden">
          <span id="plan-label">Anonimo</span>
          <span id="clicks-label">0 / 0</span>
        </div>
      </div>
    </div>
  </div>

  <!-- Cookie banner minimal -->
  <div id="cookie-banner" class="hidden">
    <span>Questo sito usa Google Analytics per raccogliere dati anonimi. <a href="privacy.html">Scopri di pi√π</a>.</span>
    <button onclick="acceptCookies()">Ok</button>
  </div>

  <!-- Modale limite raggiunto -->
  <div id="limit-backdrop" class="modal-backdrop">
    <div class="modal" role="dialog" aria-modal="true" aria-labelledby="limit-title">
      <h2 id="limit-title">Hai raggiunto il limite di utilizzo</h2>
      <p id="limit-text">Per continuare ad usare Dialettami, effettua l‚Äôaccesso o passa al piano Premium.</p>
      <div class="actions">
        <a href="/" rel="nofollow">Home</a>
        <a href="/login" class="primary" rel="nofollow">Accedi / Registrati</a>
      </div>
    </div>
  </div>

  <!-- Google Analytics: caricato ma inizializzato solo dopo consenso -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-GQBTEG460W"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}    
    // Consenso di default: denied finch√© l'utente non accetta
    gtag('consent', 'default', { 'ad_storage': 'denied', 'analytics_storage': 'denied' });
  </script>

  <!-- Script app -->
  <script type="module" src="script.js"></script>
</body>
</html>