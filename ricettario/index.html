<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Il Ricettario</title>

  <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2285%22>🍳</text></svg>">
  <link rel="stylesheet" href="style.css">
  <link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@400;600&display=swap" rel="stylesheet">

<!-- Google tag (GA4) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-912CBJB8ZW"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-912CBJB8ZW'); // niente anonymize_ip: in GA4 è automatico
</script>

<body>
  <div class="container">
    <h1>🍝 Il Ricettario</h1>
    <p class="description">
      Non sai cosa preparare? Scegli la modalità e inserisci gli ingredienti.
    </p>

    <!-- Switch modalità -->
    <div class="mode-switch" role="tablist" aria-label="Modalità Ricettario">
      <button class="mode-tab active" data-mode="svuota" role="tab" aria-selected="true">🥫 Svuota frigo</button>
      <button class="mode-tab" data-mode="fantasia" role="tab" aria-selected="false">👨‍🍳 Fantasia dell’AI Chef</button>
    </div>
    <p class="mode-desc" id="mode-desc">
      Inserisci gli ingredienti <strong>esatti</strong> per ottenere la tua ricetta con quello che hai in casa.
    </p>

    <form id="ingredients-form">
      <div id="ingredient-fields">
        <!-- Per Svuota frigo partiamo con 2 campi -->
        <input type="text" name="ingredient" placeholder="Ingrediente 1" required />
        <input type="text" name="ingredient" placeholder="Ingrediente 2" required />
      </div>

      <div class="ingredient-buttons">
        <button type="button" id="add-ingredient" aria-label="Aggiungi ingrediente">➕</button>
        <button type="button" id="remove-ingredient" aria-label="Rimuovi ingrediente">➖</button>
      </div>

      <label for="location">Dove la mangi?</label>
      <select id="location" required>
        <option value="a casa (calda)">A casa (calda)</option>
        <option value="da portare in ufficio">Da portare in ufficio</option>
      </select>

      <div class="variants">
        <span class="variants-label">Varianti:</span>
        <button type="button" class="variant active" data-v="">Nessuna</button>
        <button type="button" class="variant" data-v="light">Light</button>
        <button type="button" class="variant" data-v="vegetariana">Vegetariana</button>
        <button type="button" class="variant" data-v="veloce">Più veloce</button>
      </div>

      <button type="submit" id="generate-recipe">🍳 Prepara</button>
    </form>

    <div id="outputs-wrap" class="outputs-grid hidden">
      <div id="recipe-output" class="card">
        <h2 id="recipe-title"></h2>
        <div id="recipe-text"></div>
        <div class="actions">
          <button id="new-recipe">🔁 Nuova ricetta</button>
          <button id="copy-recipe">📋 Copia</button>
          <button id="fav-toggle" title="Aggiungi ai preferiti">☆ Salva</button>
        </div>
      </div>

      <div id="shopping-output" class="card hidden" aria-live="polite">
        <h2>🧾 Ingredienti e dosi</h2>
        <div id="shopping-text"></div>
        <div class="actions">
          <button id="copy-shopping">📋 Copia lista</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Modale limite: markup vanilla -->
  <div id="limit-modal" class="modal-overlay">
    <div class="modal-card">
      <h3>Hai raggiunto il limite gratuito</h3>
      <p>Hai usato il numero massimo di verifiche per questo mese. Accedi o passa al piano Premium per continuare.</p>
      <div class="modal-actions">
        <button id="close-limit" class="btn-gray">Chiudi</button>
        <a href="/login.html" class="btn-primary">Accedi / Registrati</a>
      </div>
    </div>
  </div>

  <script type="module" src="script.js"></script>

  <p style="text-align:center;margin:1rem 0;">
    <a href="preferiti.html">⭐ Vedi le mie ricette salvate</a>
  </p>  

  <div id="bottom-nav">
    <a href="https://stru-menti.com/" title="Home">🏠</a>
    <a href="https://stru-menti.com/bekind" title="Be Kind Tool">🌸</a>
    <a href="https://stru-menti.com/dialettami" title="Dialettami">🇮🇹</a>
    <a href="https://stru-menti.com/prezzogiusto" title="Prezzo Giusto">💶</a>
  </div>
  
  <footer>
    &copy; 2025 Ricettario da Stru🧠Menti – Creato da Leonardo Bergonzoni con 🧠 e AI - 
    <a href="https://stru-menti.com/privacy.html">Privacy</a>
  </footer>

</body>
</html>